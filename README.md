<h1 align="center">Animeko 用户指南</h1>

> [!NOTE] 
> 此文档意在帮助用户解决使用Animeko遇到的各种问题和讲解一些官方未提及的深入性知识。

## **Bangumi 账号注册**
### **注册流程**
1. **浏览器中访问 [Bangumi](https://bgm.tv)**
2. **按图示流程操作**
  <details>
    <summary>点击展开详细流程示意图</summary>

  | ![点击注册](https://i.imgs.ovh/2025/05/13/v1YXp.jpeg) | ![选择绿色区任意项](https://i.imgs.ovh/2025/05/13/v14S6.jpeg) |
  |:----------------------------------------------------:|:----------------------------------------------------:|
  | ![完善信息](https://i.imgs.ovh/2025/05/13/v1EMO.jpeg) | ![查看邮件](https://i.imgs.ovh/2025/05/13/v1dhd.jpeg) |
  | ![复制激活码](https://i.imgs.ovh/2025/05/13/v1tjg.jpeg) | ![激活账号](https://i.imgs.ovh/2025/05/13/v1K60.jpeg) |
  | ![激活成功](https://i.imgs.ovh/2025/05/13/v1pdY.jpeg) |
  </details>

### 常见问题
1. **根据监管部门规定及投诉举报，此链接违反相关法律法规，禁止访问**
   > 更换浏览器（如 Kiwi/Yandex/Firefox/Chrome/Edge/Via/X）
2. **账户激活服务暂时不可用，请稍后重试 或 您的激活请求已超时**
   > 换个邮箱注册即可   
   > 若不想浪费此邮箱，请用新注册的号给 Bangumi 的站长 [Sai](https://bgm.tv/user/sai) 发短消息，请他帮你把新账号的邮箱更改为激活失败的邮箱
3. **验证码错误，请返回重试**
   > 返回后点击验证码刷新，输入新验证码登录
4. **登录注意事项**
   > 确保 Animeko 中登录页面和授权页面显示为移动端视图   
   > 登录成功后确保授权页面弹出"此网站想打开Animeko应用"提示，点击打开   
   > 桌面版视图会导致授权失败


## **Animeko 功能介绍**
> [!NOTE]
> 基于安卓端4.10.1版本，低于此版本可能会有部分条目搜索出现"未知错误"，原因是Bangumi添加了新字段，导致Animeko无法解析数据。版本迭代比较快，请尽量保持最新版本！
<details>
  <summary>点击展开详细功能列表</summary>

- **界面**
    - **语言**
        > 界面显示的语言
    - **初始页面**
        > 启动时的默认页面
    - **使用新版条目查询接口**
        > 第三方查询接口（可能数据不全）
    - **NSFW内容**
        > 是否显示里番（Bangumi新用户需等待4个月）
    - **列表滚动动画**
        > 若使用卡顿可关闭
    - **点亮模式**
        > 高亮显示已看剧集
- **主题与色彩**
    - **高对比度深色主题**
        > 适合AMOLED屏幕，较省电
    - **播放页始终使用深色主题**
        > 播放页无视全局主题设置
    - **条目详情页使用动态主题**
        > 根据条目封面主色调动态生成主题
- **播放器和弹幕过滤**
    - **竖屏模式显示全屏按钮**
        > 效果如功能描述
    - **启动正则弹幕过滤器**
        > 是否启用弹幕正则过滤
    - **弹幕正则过滤器管理**
        > 添加正则表达式过滤弹幕
    - **发送弹幕时自动暂停播放**
        > 效果如功能描述
    - **观看90%后自动标记看过**
        > 进度达90%后自动标记为已看并同步到 Bangumi 收藏
    - **选择数据源后自动关闭弹窗**
        > 选择数据源后自动关闭数据源选择界面
    - **旋转屏幕时自动全屏**
        > 部分系统可能需要取消锁定旋转
    - **自动连播**
        > 自动切换下一集
    - **播放失败时自动切换资源**
        > 切换当前数据源其它线路 或 其他数据源
    - **长按快进速度**
        > 设置长按快进倍速
- **数据源管理**
    - **数据源订阅**
        > 远程JSON配置拉取（每次启动软件会自动更新配置）   
        > 删除订阅后，来自该订阅的数据源会一起删除
    - **数据源列表**
        > 包含订阅源、自建源、内置数据源   
        > 长按`≡`拖动排序   
        > 删除来自订阅的数据源后，下次启动应用会自动从订阅恢复
    - **开始测试**
        > 测试数据源可用性（`×`表示可能需代理）
- **观看偏好**
    - **字幕语言**
        > 默认搜索所选字幕语言的资源   
        > 拖动`≡`排序，越靠前优先级越高
    - **分辨率**
        > 默认搜索所选分辨率的资源   
        > 拖动`≡`排序，越靠前优先级越高
    - **字幕组**
        > 默认搜索输入的字幕组的资源   
        > 支持正则表达式，多字幕组用逗号分隔，越靠前优先级越高
    - **优先选择数据源类型**
        > 可选 在线/BT/无偏好
    - **快速选择在线数据线**
        > 排序靠前数据源优先播放（推荐开启）
    - **最长等待时间**
        > 按偏好匹配资源的超时时间
    - **显示禁用的数据源**
        > 在数据源选择界面显示禁用的数据源
    - **隐藏无字幕资源**
        > 折叠 无字幕/未知字幕格式 的资源
    - **完结一年后隐藏单集BT资源**
        > 老资源可能没速度
    - **BT资源优先选择季度全集**
        > 整季的资源一般下载更快（推荐开启）
    - **自动启用上次临时启用的数据源**
        > 若选择了禁用的数据源，下次播放该番会自动选择该数据源
- **弹幕源**
    - **全球加速**
        > 仅推荐中国大陆外用户开启
    - **开始测试**
        > 测试弹幕服务器连接速度
- **代理**
    - **全局代理设置**
        > 影响 Bangumi 和 所有数据源   
        > 建议保持“禁用”或“系统代理”   
        > 错误的自定义代理会导致软件网络错误   
        > 自定义代理支持 Socks5 和 HTTP协议
- **BitTorrent**
    - **BT下载速度限制**
        > 建议无限制
    - **BT上传(做种)速度限制**
        > 流量用户拉到最低，WiFi用户尽量≥2MB/s，避免死种
    - **分享率限制**
        > 流量用户拉到最低，WiFi用户尽量≥2MB/s，避免死种
    - **计费网络限制上传**
        > 使用计费网络时可开启（限制上传速度为1KB/s）
    - **Peer过滤和屏蔽设置**
        > 在下载或上传数据时不与黑名单和被规则过滤的客户端连接   
        > 若不知道这是什么请不要修改
        - **过滤规则订阅**
        - **本地过滤规则**
        - **过滤IP地址**
        - **过滤客户端指纹**
        - **过滤客户端类型**
        - **IP黑名单设置**
- **软件更新**
    - **自动检查更新**
        > 推荐开启
    - **更新类型**
        > 推荐正式版 > 测试版 > 每日构建版
    - **应用内下载**
        > 推荐开启
    - **自动下载应用**
        > 推荐开启，版本迭代较快，老版本可能会有未知错误
- **日志**
    - **反馈日志**
        > 仅限反馈使用
    - **分享当日日志文件**
        > 推荐使用
    - **复制当日日志内容**
        > 移动端不推荐使用   
        > 日志内容较多，可能造成输入法卡死且复制的内容不全
- **关于**
    - **版本号**
        > 点击5次可开启调试模式
    - **更新说明**
        > 查看 [更新日志](https://github.com/open-ani/animeko/release)
    - **官网**
        > 访问 [Animeko官网](https:myani.org)
    - **反馈建议**
        > 访问 [Animeko仓库Issues页面](https://github.com/open-ani/animeko/issues)
    - **源代码**
        > 访问 [Animeko仓库主页](https://github.com/open-ani/animeko)
    - **开发者名单**
        > 查看 [所有开发者](https://github.com/open-ani/animeko/graphs/contributors)
    - **鸣谢**
        > 提供API的第三方：[Bangumi](https://bangumi.tv)，[弹弹Play](https://dandanplay.com)
    - **交流群**
        > 官方QQ群 和 Telegram群
- **调试模式**
    - **调试模式状态**
        > 不使用时请关闭，调试模式可能会造成卡顿
    - **显示所有剧集**
        > 显示SP、OP、ED等，目前仅少数在线源支持，谨慎启用
    - **计费网络信息**
        > 支持计费网络最小上传
        > 是否为计费网络
    - **进入新手向导**
    - **重置新手引导状态**
        > 重置后，下次启动软件会进入新手引导
    - **获取 Bangumi access token**
    - **获取 Ani access token**
    - **Crush**
</details>


## **数据源**
- **定义**
    > 提供数据的网站统称数据源   
    > 无入站检测和数据加密的网站才可编写数据源
- **获取途径**
    - **Animeko官方(内置源)**
        - https://sub.creamycake.org/v1/bt1.json
        - https://sub.creamycake.org/v1/css1.json
    - **第三方分享**
        - https://gitee.com/wan0ge/extract-pure-links/raw/Ani_Pages/H.json
        - https://masofod.github.io/anibt.json
        - https://raw.githubusercontent.com/Nier4ever/ani-sub/main/css.json
    - **自己编写**
        > 本文档会详细讲解制作方法   
        > 我个人的数据源仓库 [Animeko-Subs](https://github.com/otakudesuwa/animeko-subs)
- **支持的数据源类型**
    - 蜜柑计划
        > 源站，大陆需代理，内置数据源，不可编辑
    - 动漫花园
        > 源站，大陆需代理，内置数据源，不可编辑
    - 蜜柑计划(CN)
        > 镜像站，大陆可直连，内置数据源，不可编辑
    - **RSS BT数据源**
        > 追求画质用这个
    - **Jellyfin Media Server**
        > 支持不完善，能用
    - **Emby Media Server**
        > 支持不完善，能用
    - **Ikaros CMS**
        > 目前处于开发阶段，功能不够完善，不推荐
    - **CSS Selector数据源**
        > 追求流畅用这个
- **编写CSS Selector数据源所需知识与工具**
    - **HTML标签（难度:低）**
        - *资料：[W3School - HTML标签](https://www.w3school.com.cn/tags/index.asp)*
        - *目标：简单了解即可*
    - **CSS选择器（难度:低）**
        - *资料：[Runoob - CSS选择器](https://www.runoob.com/cssref/css-selectors.html)*
        - *目标：能够按条件选择合适的选择器*
    - **正则表达式（难度:高）**
        - *资料：[Stackoverflow - 正则表达式语法](https://stackoverflow.org.cn/regexsucha)*
        - *工具：[Stackoverflow - 正则表达式测试工具](https://stackoverflow.org.cn/regex)*
        - ***提示：学不会可以问AI***
    - **开发者工具（难度:中）**
        - *安卓系统：[Kiwi浏览器](https://github.com/kiwibrowser/src.next/releases/latest)，内置完整功能的开发者工具*
        - *桌面系统：任意主流浏览器*
        - *目标：学会使用 审查元素 和 网络监控 即可*
    - **JSON语法(难度:低)**
        - *资料：[JSON语法](https://www.runoob.com/json/json-syntax.html)*
        - *提示：非硬性要求，仅在脱离软件时修改配置需要相关知识*
        - *目标：能看懂配置即可*
- **编写RSS BT数据源所需知识与工具**
    - **HTML标签（难度:低）**
    - **CSS选择器（难度:低）**
    - **开发者工具（难度:中）**
- **编写Jellyfin与Emby数据源所需知识与工具**
    - **开发者工具（难度:中）**
    - **抓包工具（难度:低）**
        - *安卓推荐：[ProxyPin](https://github.com/wanghongenpin/proxypin/releases/latest)*
        - *桌面系统：任意主流浏览器*


## **数据源编写**
### **实战: CSS Selector数据源编写**
1. **无下级展开**
### **实战: RSS BT数据源编写**
1. **无下级展开**
### **实战: Emby数据源编写（Jellyfin相同）**
1. **无下级展开**


## **Animeko 常见问题**
1. **网站有目标资源但需翻页，Animeko无搜索结果**
   > 该网站启用了分页显示，软件暂不支持自动翻页
   <details>
      <summary>点击展开解决方案</summary>
    
   - **解决方案：**
      1. *进入该数据源的编辑页面*
      2. *若不可编辑则点右上角菜单，选择 导出配置，新建Selector模板，进入新模板编辑页面，点右上角菜单，选择 从剪贴板导入配置*
      3. *复制搜索链接，将{keyword}替换为有多页搜索结果的关键词并用浏览器打开*
      4. *手动翻页，复制翻页后的链接，替换数据源编辑页的搜索链接，把搜索关键词替换为{keyword}*
      5. *一般链接末尾显示的数字是页码，search或keyword后的长字符串为关键词*
   - **示例：**
      1. *在girlgirllove中搜索"日常"*
      2. *网页里显示在第2页，软件内无结果*
      3. *仅需在搜索链接末尾加上"&page=2"即可*
      4. *暂无其它解决方法，请等开发者更新*
   </details>


## **特殊用法**
- **无下级展开**
